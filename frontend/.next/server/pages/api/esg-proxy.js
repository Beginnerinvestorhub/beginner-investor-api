"use strict";(()=>{var a={};a.id=17,a.ids=[17],a.modules={342:(a,b,c)=>{c.r(b),c.d(b,{config:()=>q,default:()=>p,handler:()=>s});var d={};c.r(d),c.d(d,{GET:()=>l,OPTIONS:()=>m});var e=c(9046),f=c(8667),g=c(3480),h=c(6435),i=c(645);let j=[{name:"Apple Inc.",sector:"Technology",esg:78,flagged:!1,marketCap:2800},{name:"Microsoft Corp.",sector:"Technology",esg:82,flagged:!1,marketCap:2400},{name:"Tesla Inc.",sector:"Automotive",esg:65,flagged:!0,marketCap:800},{name:"Johnson & Johnson",sector:"Healthcare",esg:85,flagged:!1,marketCap:450},{name:"Procter & Gamble",sector:"Consumer Goods",esg:79,flagged:!1,marketCap:350},{name:"Exxon Mobil",sector:"Energy",esg:45,flagged:!0,marketCap:400},{name:"Chevron Corp.",sector:"Energy",esg:42,flagged:!0,marketCap:280},{name:"Walmart Inc.",sector:"Retail",esg:68,flagged:!1,marketCap:380},{name:"Amazon.com Inc.",sector:"Technology",esg:71,flagged:!1,marketCap:1300},{name:"Alphabet Inc.",sector:"Technology",esg:76,flagged:!1,marketCap:1600},{name:"Meta Platforms",sector:"Technology",esg:69,flagged:!0,marketCap:750},{name:"Coca-Cola Co.",sector:"Consumer Goods",esg:74,flagged:!1,marketCap:250},{name:"PepsiCo Inc.",sector:"Consumer Goods",esg:77,flagged:!1,marketCap:220},{name:"Nike Inc.",sector:"Consumer Goods",esg:72,flagged:!1,marketCap:180},{name:"Starbucks Corp.",sector:"Consumer Services",esg:81,flagged:!1,marketCap:120},{name:"McDonald's Corp.",sector:"Consumer Services",esg:66,flagged:!1,marketCap:190},{name:"Boeing Co.",sector:"Aerospace",esg:58,flagged:!0,marketCap:120},{name:"Lockheed Martin",sector:"Aerospace",esg:55,flagged:!0,marketCap:110},{name:"Pfizer Inc.",sector:"Healthcare",esg:83,flagged:!1,marketCap:280},{name:"Merck & Co.",sector:"Healthcare",esg:80,flagged:!1,marketCap:220}],k=new Map;async function l(a){try{let b=a.headers.get("x-forwarded-for")?.split(",")[0]||a.headers.get("x-real-ip")||"unknown";if(!function(a){let b=Date.now(),c=k.get(a);return!c||b>c.resetTime?(k.set(a,{count:1,resetTime:b+6e4}),!0):!(c.count>=100)&&(c.count++,!0)}(b))return i.NextResponse.json({error:"Rate limit exceeded. Please try again later."},{status:429,headers:{"X-RateLimit-Limit":"100","X-RateLimit-Remaining":"0","X-RateLimit-Reset":new Date(Date.now()+6e4).toISOString()}});await new Promise(a=>setTimeout(a,100));let c=j.map(a=>({...a,esg:Math.max(0,Math.min(100,a.esg+(Math.random()-.5)*10)),marketCap:a.marketCap+(Math.random()-.5)*50}));return i.NextResponse.json({stocks:c,lastUpdated:new Date().toISOString(),source:"mock-data"},{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Authorization","Cache-Control":"public, max-age=300","X-RateLimit-Limit":"100","X-RateLimit-Remaining":Math.max(0,100-(k.get(b)?.count||0)).toString(),"X-RateLimit-Reset":new Date(Date.now()+6e4).toISOString()}})}catch(a){return console.error("ESG Proxy API Error:",a),i.NextResponse.json({error:"Internal server error while fetching ESG data"},{status:500,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Authorization"}})}}async function m(){return i.NextResponse.json({},{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Authorization"}})}var n=c(8112),o=c(6385);let p=(0,h.hoist)(d,"default"),q=(0,h.hoist)(d,"config"),r=new g.PagesAPIRouteModule({definition:{kind:f.RouteKind.PAGES_API,page:"/api/esg-proxy",pathname:"/api/esg-proxy",bundlePath:"",filename:""},userland:d,distDir:".next",relativeProjectDir:""});async function s(a,b,c){let d=await r.prepare(a,b,{srcPage:"/api/esg-proxy"});if(!d){b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve());return}let{query:f,params:g,prerenderManifest:h,routerServerContext:i}=d;try{let c=a.method||"GET",d=(0,n.getTracer)(),e=d.getActiveScopeSpan(),j=r.instrumentationOnRequestError.bind(r),k=async e=>r.render(a,b,{query:{...f,...g},params:g,allowedRevalidateHeaderKeys:[],multiZoneDraftMode:!1,trustHostHeader:!1,previewProps:h.preview,propagateError:!1,dev:r.isDev,page:"/api/esg-proxy",internalRevalidate:null==i?void 0:i.revalidate,onError:(...b)=>j(a,...b)}).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let f=d.getRootSpanAttributes();if(!f)return;if(f.get("next.span_type")!==o.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${f.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let g=f.get("next.route");if(g){let a=`${c} ${g}`;e.setAttributes({"next.route":g,"http.route":g,"next.span_name":a}),e.updateName(a)}else e.updateName(`${c} ${a.url}`)});e?await k(e):await d.withPropagatedContext(a.headers,()=>d.trace(o.BaseServerSpan.handleRequest,{spanName:`${c} ${a.url}`,kind:n.SpanKind.SERVER,attributes:{"http.method":c,"http.target":a.url}},k))}catch(a){if(r.isDev)throw a;(0,e.sendError)(b,500,"Internal Server Error")}finally{null==c.waitUntil||c.waitUntil.call(c,Promise.resolve())}}},2015:a=>{a.exports=require("react")},3033:a=>{a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:a=>{a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5600:a=>{a.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6472:a=>{a.exports=require("@opentelemetry/api")},9121:a=>{a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:a=>{a.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var b=require("../../webpack-api-runtime.js");b.C(a);var c=b.X(0,[169,645],()=>b(b.s=342));module.exports=c})();