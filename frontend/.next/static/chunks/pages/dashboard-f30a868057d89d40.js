(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{6281:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>E});var t=a(7876),i=a(7328),n=a.n(i),r=a(9820),l=a(4232),o=function(e){return e.EDUCATION="education",e.INVESTMENT="investment",e.ENGAGEMENT="engagement",e.MILESTONE="milestone",e.SOCIAL="social",e}({}),c=function(e){return e.COMMON="common",e.RARE="rare",e.EPIC="epic",e.LEGENDARY="legendary",e}({});let d={FIRST_STEPS:{id:"first_steps",name:"First Steps",description:"Complete your first risk assessment",icon:"\uD83C\uDFAF",category:o.EDUCATION,points:100,rarity:c.COMMON},KNOWLEDGE_SEEKER:{id:"knowledge_seeker",name:"Knowledge Seeker",description:"Use 5 different investment tools",icon:"\uD83D\uDCDA",category:o.EDUCATION,points:250,rarity:c.RARE},INVESTMENT_GURU:{id:"investment_guru",name:"Investment Guru",description:"Master all investment tools",icon:"\uD83E\uDDE0",category:o.EDUCATION,points:500,rarity:c.EPIC},PORTFOLIO_BUILDER:{id:"portfolio_builder",name:"Portfolio Builder",description:"Create your first portfolio",icon:"\uD83D\uDCBC",category:o.INVESTMENT,points:150,rarity:c.COMMON},DIVERSIFICATION_MASTER:{id:"diversification_master",name:"Diversification Master",description:"Create a well-diversified portfolio",icon:"\uD83D\uDCCA",category:o.INVESTMENT,points:300,rarity:c.RARE},ESG_CHAMPION:{id:"esg_champion",name:"ESG Champion",description:"Use ESG screening for sustainable investing",icon:"\uD83C\uDF31",category:o.INVESTMENT,points:200,rarity:c.RARE},FRACTIONAL_PIONEER:{id:"fractional_pioneer",name:"Fractional Pioneer",description:"Calculate fractional shares for affordable investing",icon:"\uD83D\uDD22",category:o.INVESTMENT,points:150,rarity:c.COMMON},DAILY_VISITOR:{id:"daily_visitor",name:"Daily Visitor",description:"Log in for 7 consecutive days",icon:"\uD83D\uDCC5",category:o.ENGAGEMENT,points:200,rarity:c.RARE},WEEKLY_WARRIOR:{id:"weekly_warrior",name:"Weekly Warrior",description:"Maintain a 30-day login streak",icon:"\uD83D\uDD25",category:o.ENGAGEMENT,points:400,rarity:c.EPIC},LEARNING_STREAK:{id:"learning_streak",name:"Learning Streak",description:"Complete learning activities for 14 days",icon:"⚡",category:o.ENGAGEMENT,points:350,rarity:c.EPIC},CENTURY_CLUB:{id:"century_club",name:"Century Club",description:"Earn 1,000 total points",icon:"\uD83D\uDCAF",category:o.MILESTONE,points:100,rarity:c.RARE},PLATINUM_INVESTOR:{id:"platinum_investor",name:"Platinum Investor",description:"Reach Level 10",icon:"\uD83D\uDC8E",category:o.MILESTONE,points:1e3,rarity:c.LEGENDARY},EARLY_ADOPTER:{id:"early_adopter",name:"Early Adopter",description:"One of the first 100 users",icon:"\uD83D\uDE80",category:o.MILESTONE,points:500,rarity:c.LEGENDARY},COMMUNITY_HELPER:{id:"community_helper",name:"Community Helper",description:"Share your achievements",icon:"\uD83E\uDD1D",category:o.SOCIAL,points:150,rarity:c.COMMON},REFERRAL_CHAMPION:{id:"referral_champion",name:"Referral Champion",description:"Invite 5 friends to join",icon:"\uD83D\uDC65",category:o.SOCIAL,points:300,rarity:c.RARE}},m=[0,100,250,450,700,1e3,1350,1750,2200,2700,3250,3850,4500,5200,5950,6750,7600,8500,9450,10500],u={COMPLETE_RISK_ASSESSMENT:50,USE_TOOL_FIRST_TIME:25,USE_TOOL_REPEAT:10,CREATE_PORTFOLIO:75,DAILY_LOGIN:10,COMPLETE_EDUCATION_MODULE:30},h={FIRST_RISK_ASSESSMENT:{id:"first_risk_assessment",name:"Risk Assessment Complete",description:"Complete your first risk assessment",target:1,reward:{points:100,badge:"FIRST_STEPS"}},TOOLS_EXPLORER:{id:"tools_explorer",name:"Tools Explorer",description:"Try 5 different investment tools",target:5,reward:{points:250,badge:"KNOWLEDGE_SEEKER"}},PORTFOLIO_CREATOR:{id:"portfolio_creator",name:"Portfolio Creator",description:"Create your first portfolio",target:1,reward:{points:150,badge:"PORTFOLIO_BUILDER"}},LOGIN_STREAK_7:{id:"login_streak_7",name:"7-Day Streak",description:"Log in for 7 consecutive days",target:7,reward:{points:200,badge:"DAILY_VISITOR"}},ESG_USER:{id:"esg_user",name:"ESG Screening",description:"Use ESG screening tool",target:1,reward:{points:200,badge:"ESG_CHAMPION"}}};c.COMMON,c.RARE,c.EPIC,c.LEGENDARY;var v=a(1040),N=a(9099);function E(){let{user:e,loading:s}=(0,r.useAuth)(),a=(0,N.useRouter)(),[i,o]=(0,l.useState)(!1),[c,E]=(0,l.useState)("overview"),{userProgress:p,loading:g}=function(e){let[s,a]=(0,l.useState)(null),[t,i]=(0,l.useState)(!0),[n,o]=(0,l.useState)(null),{user:c}=(0,r.useAuth)(),N="http://localhost:3001",E=(0,l.useCallback)(async()=>{if(!c)return null;let e=await c.getIdToken();return v.default.create({baseURL:N,headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}})},[c,N]);(0,l.useEffect)(()=>{c&&p()},[c]);let p=async()=>{try{var s;i(!0);let t=await E();if(!t)return void o("Authentication required");let n=await t.get("/api/gamification/user-data");if(null==(s=n.data)?void 0:s.data){let e=n.data.data;a(e)}else{let s={userId:e,totalPoints:0,level:1,experiencePoints:0,experienceToNextLevel:m[1],badges:[],streaks:{loginStreak:0,learningStreak:0},achievements:[],stats:{toolsUsed:[],assessmentsCompleted:0,portfoliosCreated:0,educationModulesCompleted:0,totalTimeSpent:0,averageSessionTime:0,favoriteTools:[]}};a(s),await g(s)}}catch(e){o("Failed to load user progress"),console.error("Gamification load error:",e)}finally{i(!1)}},g=async s=>{try{let a=await E();a&&await a.post("/api/gamification/save-user-data",s);try{localStorage.setItem("gamification_".concat(e),JSON.stringify(s))}catch(e){console.error("Error saving user data to localStorage:",e)}}catch(e){console.error("Failed to save user progress:",e)}},x=(0,l.useCallback)(e=>{let s=1;for(let a=0;a<m.length;a++)if(e>=m[a])s=a+1;else break;return Math.min(s,m.length)},[]),j=(0,l.useCallback)(e=>{let s=x(e),a=m[s-1]||0,t=m[s]||m[m.length-1];return{current:s,next:s+1,progress:Math.min(t>a?(e-a)/(t-a)*100:100,100)}},[x]),y=(0,l.useCallback)(async(e,t)=>{if(!s)return;let i=s.totalPoints+e,n=x(i),r=n>s.level,l={...s,totalPoints:i,level:n,experiencePoints:i,experienceToNextLevel:m[n]||m[m.length-1]};a(l),await g(l),O("points",{points:e,reason:t,leveledUp:r,newLevel:n}),r&&await C(n,l)},[s,x]),S=(0,l.useCallback)(async e=>{if(!s)return;let t=d[e];if(!t||s.badges.some(s=>s.id===e))return;let i={...t,isUnlocked:!0,unlockedAt:new Date},n={...s,badges:[...s.badges,i],totalPoints:s.totalPoints+t.points};a(n),await g(n),O("badge",i)},[s]),_=(0,l.useCallback)(async e=>{var t,i;if(!s)return;let n=new Date().toDateString(),r="login"===e?null==(t=s.streaks.lastLoginDate)?void 0:t.toDateString():null==(i=s.streaks.lastLearningDate)?void 0:i.toDateString(),l=1;if(r){let a=new Date;if(a.setDate(a.getDate()-1),r===a.toDateString())l=("login"===e?s.streaks.loginStreak:s.streaks.learningStreak)+1;else if(r===n)return}let o={...s,streaks:{...s.streaks,["login"===e?"loginStreak":"learningStreak"]:l,["login"===e?"lastLoginDate":"lastLearningDate"]:new Date}};a(o),await g(o),await f(e,l,o)},[s]),T=(0,l.useCallback)(async(e,a)=>{if(!s)return[];let t=[];return Object.values(h).forEach(e=>{if(s.achievements.some(s=>s.id===e.id&&s.isCompleted))return;let i=0;switch(e.id){case"first_risk_assessment":i=a.assessmentsCompleted||0;break;case"tools_explorer":i=(a.toolsUsed||[]).length;break;case"portfolio_creator":i=a.portfoliosCreated||0;break;case"login_streak_7":i=s.streaks.loginStreak;break;case"esg_user":i=+!!(a.toolsUsed||[]).includes("esg-screener")}if(i>=e.target){let s={id:e.id,name:e.name,description:e.description,type:e.id,progress:e.target,target:e.target,isCompleted:!0,completedAt:new Date,reward:e.reward};t.push(s)}}),t},[s]),C=async(e,s)=>{e>=10&&await S("PLATINUM_INVESTOR")},f=async(e,s,a)=>{"login"===e&&s>=7&&await S("DAILY_VISITOR"),"login"===e&&s>=30&&await S("WEEKLY_WARRIOR"),"learning"===e&&s>=14&&await S("LEARNING_STREAK")},I=(0,l.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!s)return;let i=0,n={...s.stats};switch(e){case"COMPLETE_RISK_ASSESSMENT":i=u.COMPLETE_RISK_ASSESSMENT,n.assessmentsCompleted+=1;break;case"USE_TOOL":let r=t.toolId,l=!n.toolsUsed.includes(r);i=l?u.USE_TOOL_FIRST_TIME:u.USE_TOOL_REPEAT,l&&n.toolsUsed.push(r);break;case"CREATE_PORTFOLIO":i=u.CREATE_PORTFOLIO,n.portfoliosCreated+=1;break;case"DAILY_LOGIN":i=u.DAILY_LOGIN,await _("login");break;case"COMPLETE_EDUCATION":i=u.COMPLETE_EDUCATION_MODULE,n.educationModulesCompleted+=1,await _("learning")}let o={...s,stats:n};for(let s of(a(o),await g(o),i>0&&await y(i,e),await T(e,n))){let e={...o,achievements:[...o.achievements,s]};a(e),await g(e),s.reward.points>0&&await y(s.reward.points,"Achievement: ".concat(s.name)),s.reward.badge&&await S(s.reward.badge),O("achievement",s)}},[s,y,S,_,T]),O=(0,l.useCallback)((e,s)=>{},[]);return{userProgress:s,loading:t,error:n,trackEvent:I,awardPoints:y,unlockBadge:S,updateStreak:_,calculateLevel:x,getProgressToNextLevel:j,checkAchievements:T,showNotification:O}}((null==e?void 0:e.uid)||"");return((0,l.useEffect)(()=>{s||e||(o(!0),a.replace("/login"))},[e,s,a]),s||i||g)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n(),{children:[(0,t.jsx)("title",{children:"Loading Dashboard | Beginner Investor Hub"}),(0,t.jsx)("meta",{name:"robots",content:"noindex, nofollow"})]}),(0,t.jsxs)("div",{className:"nyse-loading-container",children:[(0,t.jsx)("div",{className:"nyse-spinner"}),(0,t.jsx)("p",{className:"nyse-loading-text",children:i?"Redirecting...":"Loading your dashboard..."})]})]}):e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n(),{children:[(0,t.jsx)("title",{children:"My Dashboard | Beginner Investor Hub"}),(0,t.jsx)("meta",{name:"description",content:"Your personalized investment dashboard and learning journey."}),(0,t.jsx)("meta",{name:"robots",content:"noindex, nofollow"})]}),(0,t.jsx)("div",{className:"dashboard-page",children:(0,t.jsxs)("div",{className:"nyse-container",children:[(0,t.jsxs)("div",{className:"dashboard-header",children:[(0,t.jsxs)("div",{className:"welcome-section",children:[(0,t.jsxs)("h1",{className:"welcome-title",children:["Welcome back, ",e.displayName||"Investor","! \uD83D\uDC4B"]}),(0,t.jsx)("p",{className:"welcome-subtitle",children:"Ready to continue your investment learning journey?"})]}),(0,t.jsxs)("div",{className:"quick-stats",children:[(0,t.jsxs)("div",{className:"stat-card",children:[(0,t.jsx)("div",{className:"stat-icon",children:"\uD83C\uDFAF"}),(0,t.jsxs)("div",{className:"stat-content",children:[(0,t.jsx)("div",{className:"stat-number",children:(null==p?void 0:p.level)||1}),(0,t.jsx)("div",{className:"stat-label",children:"Level"})]})]}),(0,t.jsxs)("div",{className:"stat-card",children:[(0,t.jsx)("div",{className:"stat-icon",children:"⭐"}),(0,t.jsxs)("div",{className:"stat-content",children:[(0,t.jsx)("div",{className:"stat-number",children:(null==p?void 0:p.totalPoints)||0}),(0,t.jsx)("div",{className:"stat-label",children:"Points"})]})]}),(0,t.jsxs)("div",{className:"stat-card",children:[(0,t.jsx)("div",{className:"stat-icon",children:"\uD83D\uDD25"}),(0,t.jsxs)("div",{className:"stat-content",children:[(0,t.jsx)("div",{className:"stat-number",children:(null==p?void 0:p.streaks.loginStreak)||0}),(0,t.jsx)("div",{className:"stat-label",children:"Day Streak"})]})]})]})]}),(0,t.jsx)("div",{className:"dashboard-nav",children:(0,t.jsxs)("nav",{className:"nav-tabs",children:[(0,t.jsx)("button",{className:"nav-tab ".concat("overview"===c?"active":""),onClick:()=>E("overview"),children:"\uD83D\uDCCA Overview"}),(0,t.jsx)("button",{className:"nav-tab ".concat("tools"===c?"active":""),onClick:()=>E("tools"),children:"\uD83D\uDEE0️ Tools"}),(0,t.jsx)("button",{className:"nav-tab ".concat("learning"===c?"active":""),onClick:()=>E("learning"),children:"\uD83D\uDCDA Learning"})]})}),(0,t.jsxs)("div",{className:"dashboard-content",children:["overview"===c&&(0,t.jsx)("div",{className:"tab-panel",children:(0,t.jsxs)("div",{className:"overview-grid",children:[(0,t.jsxs)("div",{className:"activity-card",children:[(0,t.jsx)("h3",{className:"card-title",children:"Recent Activity"}),(0,t.jsxs)("div",{className:"activity-list",children:[(0,t.jsxs)("div",{className:"activity-item",children:[(0,t.jsx)("div",{className:"activity-icon",children:"✅"}),(0,t.jsxs)("div",{className:"activity-content",children:[(0,t.jsx)("div",{className:"activity-text",children:'Completed "Risk Assessment" module'}),(0,t.jsx)("div",{className:"activity-time",children:"2 hours ago"})]})]}),(0,t.jsxs)("div",{className:"activity-item",children:[(0,t.jsx)("div",{className:"activity-icon",children:"\uD83D\uDCC8"}),(0,t.jsxs)("div",{className:"activity-content",children:[(0,t.jsx)("div",{className:"activity-text",children:"Updated portfolio simulation"}),(0,t.jsx)("div",{className:"activity-time",children:"1 day ago"})]})]}),(0,t.jsxs)("div",{className:"activity-item",children:[(0,t.jsx)("div",{className:"activity-icon",children:"\uD83C\uDFC6"}),(0,t.jsxs)("div",{className:"activity-content",children:[(0,t.jsx)("div",{className:"activity-text",children:'Earned "First Investment" badge'}),(0,t.jsx)("div",{className:"activity-time",children:"3 days ago"})]})]})]})]}),(0,t.jsxs)("div",{className:"progress-card",children:[(0,t.jsx)("h3",{className:"card-title",children:"Learning Progress"}),(0,t.jsxs)("div",{className:"progress-overview",children:[(0,t.jsxs)("div",{className:"progress-item",children:[(0,t.jsx)("div",{className:"progress-label",children:"Modules Completed"}),(0,t.jsx)("div",{className:"progress-bar",children:(0,t.jsx)("div",{className:"progress-fill",style:{width:"65%"}})}),(0,t.jsx)("div",{className:"progress-text",children:"13/20"})]}),(0,t.jsxs)("div",{className:"progress-item",children:[(0,t.jsx)("div",{className:"progress-label",children:"Tools Mastered"}),(0,t.jsx)("div",{className:"progress-bar",children:(0,t.jsx)("div",{className:"progress-fill",style:{width:"40%"}})}),(0,t.jsx)("div",{className:"progress-text",children:"4/10"})]}),(0,t.jsxs)("div",{className:"progress-item",children:[(0,t.jsx)("div",{className:"progress-label",children:"Portfolio Simulations"}),(0,t.jsx)("div",{className:"progress-bar",children:(0,t.jsx)("div",{className:"progress-fill",style:{width:"80%"}})}),(0,t.jsx)("div",{className:"progress-text",children:"8/10"})]})]})]})]})}),"tools"===c&&(0,t.jsx)("div",{className:"tab-panel",children:(0,t.jsxs)("div",{className:"tools-grid",children:[(0,t.jsxs)("div",{className:"tool-card",children:[(0,t.jsx)("div",{className:"tool-icon",children:"\uD83D\uDCCA"}),(0,t.jsx)("h3",{className:"tool-title",children:"Portfolio Monitor"}),(0,t.jsx)("p",{className:"tool-description",children:"Track your virtual investments"}),(0,t.jsx)("button",{className:"tool-button",children:"Open Tool"})]}),(0,t.jsxs)("div",{className:"tool-card",children:[(0,t.jsx)("div",{className:"tool-icon",children:"⚖️"}),(0,t.jsx)("h3",{className:"tool-title",children:"Risk Assessment"}),(0,t.jsx)("p",{className:"tool-description",children:"Evaluate your risk tolerance"}),(0,t.jsx)("button",{className:"tool-button",children:"Open Tool"})]}),(0,t.jsxs)("div",{className:"tool-card",children:[(0,t.jsx)("div",{className:"tool-icon",children:"\uD83C\uDFAF"}),(0,t.jsx)("h3",{className:"tool-title",children:"ESG Screener"}),(0,t.jsx)("p",{className:"tool-description",children:"Find sustainable investments"}),(0,t.jsx)("button",{className:"tool-button",children:"Open Tool"})]}),(0,t.jsxs)("div",{className:"tool-card",children:[(0,t.jsx)("div",{className:"tool-icon",children:"\uD83D\uDCB0"}),(0,t.jsx)("h3",{className:"tool-title",children:"Fractional Calculator"}),(0,t.jsx)("p",{className:"tool-description",children:"Calculate fractional share values"}),(0,t.jsx)("button",{className:"tool-button",children:"Open Tool"})]})]})}),"learning"===c&&(0,t.jsx)("div",{className:"tab-panel",children:(0,t.jsxs)("div",{className:"learning-path",children:[(0,t.jsx)("h3",{className:"card-title",children:"Your Learning Path"}),(0,t.jsxs)("div",{className:"learning-modules",children:[(0,t.jsxs)("div",{className:"module-item completed",children:[(0,t.jsx)("div",{className:"module-icon",children:"✅"}),(0,t.jsxs)("div",{className:"module-content",children:[(0,t.jsx)("h4",{children:"Investment Basics"}),(0,t.jsx)("p",{children:"Learn fundamental investment concepts"})]})]}),(0,t.jsxs)("div",{className:"module-item current",children:[(0,t.jsx)("div",{className:"module-icon",children:"\uD83D\uDD04"}),(0,t.jsxs)("div",{className:"module-content",children:[(0,t.jsx)("h4",{children:"Portfolio Management"}),(0,t.jsx)("p",{children:"Master portfolio construction and rebalancing"})]})]}),(0,t.jsxs)("div",{className:"module-item locked",children:[(0,t.jsx)("div",{className:"module-icon",children:"\uD83D\uDD12"}),(0,t.jsxs)("div",{className:"module-content",children:[(0,t.jsx)("h4",{children:"Advanced Strategies"}),(0,t.jsx)("p",{children:"Explore advanced investment techniques"})]})]})]})]})})]})]})})]}):null}},7580:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return a(6281)}])},9099:(e,s,a)=>{e.exports=a(6296)},9820:(e,s,a)=>{"use strict";a.r(s),a.d(s,{useAuth:()=>c});var t=a(4232),i=a(6559),n=a(6042);let r={apiKey:"",authDomain:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:"",measurementId:a(5364).env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID},l=(0,n.initializeApp)(r),o=(0,i.getAuth)(l);function c(){let[e,s]=(0,t.useState)(null),[a,n]=(0,t.useState)(null),[r,l]=(0,t.useState)(!0),[c,d]=(0,t.useState)(null);(0,t.useEffect)(()=>{let e=(0,i.onAuthStateChanged)(o,async e=>{if(s(e),l(!1),e){let s=await e.getIdTokenResult();n("string"==typeof s.claims.role?s.claims.role:"user")}else n(null)});return()=>e()},[]);let m=(0,t.useCallback)(async(e,s)=>{l(!0),d(null);try{await (0,i.signInWithEmailAndPassword)(o,e,s)}catch(e){d(e)}finally{l(!1)}},[]);return{user:e,loading:r,role:a,error:c,login:m,signup:(0,t.useCallback)(async(e,s)=>{l(!0),d(null);try{await (0,i.createUserWithEmailAndPassword)(o,e,s)}catch(e){d(e)}finally{l(!1)}},[]),logout:(0,t.useCallback)(async()=>{l(!0);try{await (0,i.signOut)(o)}finally{l(!1)}},[])}}}},e=>{e.O(0,[20,206,40,636,593,792],()=>e(e.s=7580)),_N_E=e.O()}]);